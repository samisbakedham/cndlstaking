{"version":3,"file":"torus.esm.js","sources":["../src/interfaces.ts","../src/config.ts","../src/embedUtils.ts","../src/loglevel.ts","../src/messages.ts","../src/utils.ts","../src/inpage-provider.ts","../src/integrity.ts","../src/PopupHandler.ts","../src/siteMetadata.ts","../src/embed.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null],"names":["LOGIN_PROVIDER","GOOGLE","FACEBOOK","TWITCH","REDDIT","DISCORD","WALLET_OPENLOGIN_VERIFIER_MAP","PAYMENT_PROVIDER","MOONPAY","WYRE","RAMPNETWORK","XANPOOL","MERCURYO","TRANSAK","TORUS_BUILD_ENV","PRODUCTION","DEVELOPMENT","BINANCE","TESTING","LRC","BETA","BUTTON_POSITION","BOTTOM_LEFT","TOP_LEFT","BOTTOM_RIGHT","TOP_RIGHT","paymentProviders","line1","line2","line3","supportPage","minOrderValue","maxOrderValue","validCurrencies","validCryptoCurrencies","includeFees","enforceMax","sell","translations","en","embed","continue","actionRequired","pendingAction","cookiesRequired","enableCookies","clickHere","de","ja","ko","zh","supportedVerifierList","api","prodTorusUrl","localStorageKey","window","location","hostname","runOnLoad","fn","Promise","resolve","reject","document","body","then","catch","addEventListener","htmlToElement","html","template","createElement","trimmedHtml","trim","innerHTML","content","firstChild","handleEvent","handle","eventName","handler","handlerArgs","handlerWrapper","removeEventListener","handleStream","chunk","removeListener","on","documentReady","readyState","loglevel","getLogger","errors","disconnected","permanentlyDisconnected","sendSiteMetadata","unsupportedSync","method","invalidDuplexStream","invalidOptions","maxEventListeners","shouldSendMetadata","invalidRequestArgs","invalidRequestMethod","invalidRequestParams","invalidLoggerObject","invalidLoggerMethod","info","connected","chainId","warnings","enableDeprecation","sendDeprecation","events","close","data","networkChanged","notification","publicConfigStore","config","validatePaymentProvider","provider","params","isValid","Object","keys","length","selectedProvider","selectedParams","fiatValue","requestedOrderAmount","parseFloat","toString","selectedCurrency","includes","selectedCryptoCurrency","createErrorMiddleware","req","res","next","error","ethErrors","rpc","invalidRequest","message","done","log","logStreamDisconnectWarning","remoteLabel","emitter","warningMsg","stack","warn","listenerCount","emit","getPreopenInstanceId","Math","random","slice","getTorusUrl","buildEnv","integrity","torusUrl","logLevel","version","versionUsed","response","get","useAPIKey","getUserLanguage","userLanguage","navigator","language","userLanguages","split","prototype","hasOwnProperty","call","EMITTED_NOTIFICATIONS","NOOP","FEATURES_PROVIDER_CHANGE_WINDOW","FEATURES_DEFAULT_WALLET_WINDOW","FEATURES_CONFIRM_WINDOW","storageAvailable","type","storage","x","setItem","removeItem","e","code","name","getPopupFeatures","dualScreenLeft","screenLeft","undefined","screenX","dualScreenTop","screenTop","screenY","w","h","width","innerWidth","documentElement","clientWidth","screen","height","innerHeight","clientHeight","systemZoom","left","abs","top","features","SafeEventEmitter","defaultMaxListeners","getRpcPromiseCallback","unwrapResult","Array","isArray","result","TorusInpageProvider","constructor","connectionStream","jsonRpcStreamName","enable","experimentalMethods","send","isDuplexStream","Error","messages","isTorus","setMaxListeners","_state","_defaultState","selectedAddress","networkVersion","_handleAccountsChanged","bind","_handleChainChanged","_handleUnlockStateChanged","_handleConnect","_handleDisconnect","_handleStreamDisconnect","_sendSync","_rpcRequest","_warnOfDeprecation","_initializeState","request","sendAsync","mux","ObjectMultiplex","pump","_publicConfigStore","ObservableStore","storageKey","createStream","storeAsStream","ignoreStream","isConnected","jsonRpcConnection","createStreamMiddleware","stream","rpcEngine","JRPCEngine","push","createIdRemapMiddleware","middleware","_rpcEngine","payload","_sentWarnings","args","callback","addListener","listener","once","prependListener","prependOnceListener","accounts","isUnlocked","initialized","isInternal","cb","_payload","jsonrpc","err","tryPreopenHandle","methodOrPayload","callbackOrArgs","id","debug","isRecoverable","errorMessage","isPermanentlyDisconnected","EthereumRpcError","streamName","isEthAccounts","finalAccounts","account","dequal","hasEmittedConnection","defaults","options","algorithms","delimiter","full","hashes","internalHashes","forEach","algorithm","createHash","update","digest","sri","output","map","join","main","finalOptions","PopupHandler","EventEmitter","url","target","windowTimer","iClosedWindow","_setupTimer","Number","setInterval","closed","clearInterval","open","href","focus","redirect","locationReplaceOnRedirect","replace","imgExists","img","onload","onerror","src","getSiteName","siteName","querySelector","metaTitle","title","getSiteIcon","icon","from","querySelectorAll","find","_icon","Boolean","getSiteMetadata","engine","domainMetadata","originalError","defaultVerifiers","iframeIntegrity","expectedCacheControlHeader","UNSAFE_METHODS","isLocalStorageAvailable","preLoadIframe","torusIframeHtml","check","hash","crossOrigin","rel","relList","supports","head","appendChild","Torus","buttonPosition","modalZIndex","apiKey","configuration","isLoggedIn","isInitialized","torusWidgetVisibility","requestedVerifier","currentVerifier","nodeDetailManager","NodeDetailManager","torusJs","TorusJs","metadataHost","allowHost","setAPIKey","alertZIndex","isIframeFullScreen","dappStorageKey","init","enableLogging","enabledVerifiers","network","host","networkName","blockExplorer","ticker","tickerName","loginConfig","showTorusButton","whiteLabel","skipTKey","useLocalStorage","setDefaultLevel","enableAll","disableAll","storedKey","localStorage","getItem","generatedKey","torusIframeUrl","URL","pathname","endsWith","torusIframe","torusAlertContainer","style","display","setProperty","link","setAttribute","styleLink","defaultLanguage","customTranslations","mergedTranslations","deepmerge","languageTranslations","embedTranslations","handleSetup","_setupWeb3","initStream","communicationMux","getStream","success","_displayIframe","write","fetchUrl","resp","fetch","cache","headers","text","calculatedIntegrity","generateIntegrity","clearInit","login","verifier","login_hint","loginHint","ethereum","logout","logOutStream","statusStream","statusStreamHandler","status","loggedIn","cleanUp","isElement","element","Element","HTMLDocument","contains","remove","torusAlert","hideTorusButton","_sendWidgetVisibilityStatus","setProvider","rest","providerChangeStream","preopenInstanceId","_handleWindow","override","showWallet","path","showWalletStream","finalPath","showWalletHandler","instanceId","finalUrl","searchParams","append","walletWindow","getPublicAddress","verifierId","isExtended","nodeDetails","getNodeDetails","endpoints","torusNodeEndpoints","torusNodePubs","torusNodePub","walletVerifier","openloginVerifier","existingV1User","getUserTypeAndAddress","typeOfUser","address","v2User","newV2User","getUserInfo","userInfoAccessStream","userInfoAccessHandler","approved","rejected","newRequest","userInfoStream","userInfoHandler","handlerChunk","initiateTopup","JSON","stringify","topupStream","topupHandler","windowStream","handledWindow","_createPopupBlockAlert","closeHandler","receivedId","_setEmbedWhiteLabel","theme","isDark","colors","classList","add","torusBrand1","torusGray2","_getLogoUrl","logoUrl","logoLight","logoDark","torusWidgetVisibilityStream","isFull","right","bottom","assign","metamaskStream","BasePostMessageStream","targetWindow","contentWindow","targetOrigin","origin","communicationStream","inpageProvider","detectAccountRequestPrototypeModifier","m","originalMethod","providerFunc","apply","setTimeout","handleLoginCb","_","_showLoginPopup","isLoginCallback","proxiedInpageProvider","Proxy","deleteProperty","setupMultiplex","widgetStream","calledFromEmbed","loginHandler","oauthStream","successAlert","btnContainer","bindOnLoad","children","attachOnLoad"],"mappings":"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"}